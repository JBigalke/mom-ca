<?xml version="1.0" encoding="UTF-8"?>
<xrx:widget xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events"
  xmlns:xrx="http://www.monasterium.net/NS/xrx" xmlns:xf="http://www.w3.org/2002/xforms">
  <xrx:id>tag:www.monasterium.net,2011:/core/widget/my-account</xrx:id>
  <xrx:title>
    <xrx:i18n>
      <xrx:key>my-account</xrx:key>
      <xrx:default>My account</xrx:default>
    </xrx:i18n>
  </xrx:title>
  <xrx:subtitle />
  <xrx:description />
  <xrx:author>jochen.graf@uni-koeln.de</xrx:author>
  <xrx:licence>
    This is a component file of the VdU Software for a Virtual Research
    Environment for the handling of Medieval charters.

    As the source code is available here, it is somewhere between an alpha-
    and a beta-release, may be changed without any consideration of
    backward compatibility of other parts of the system, therefore,
    without any notice.

    This file is part of the VdU Virtual Research Environment Toolkit
    (VdU/VRET).

    The VdU/VRET is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    VdU/VRET is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with VdU/VRET. If not, see http://www.gnu.org/licenses.

    We expect VdU/VRET to be distributed in the future with a license more
    lenient towards the inclusion of components into other systems, once
    it leaves the active development stage.
  </xrx:licence>
  <xrx:variables>
    <xrx:variable>
      <xrx:name>$xmltest</xrx:name>
      <xrx:expression>account:convert-to-new-type(user:document($xrx:user-id))</xrx:expression>
    </xrx:variable>
  </xrx:variables>
  <xrx:portal>tag:www.monasterium.net,2011:/mom/portal/default
  </xrx:portal>
  <xrx:init>
    <xrx:processor>
      <xrx:xformsflag>true</xrx:xformsflag>
            <xrx:jqueryflag>true</xrx:jqueryflag>
      
    </xrx:processor>
  </xrx:init>
  <xrx:jss>
           <!-- jQuery resources -->
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/jquery</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/core</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/widget</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/button</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/mouse</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/draggable</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/droppable</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/position</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/resizable</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/dialog</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/effect</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/xrx/resource/jquery/ui/effect-pulsate</xrx:resource>
    
    <xrx:resource>tag:www.monasterium.net,2011:/mom/resource/twitter</xrx:resource>
    
    <!-- core resources -->
    <xrx:resource>tag:www.monasterium.net,2011:/core/resource/jquery/xrxI18n</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/core/resource/jquery/ui/xrxMessage</xrx:resource>
    <xrx:resource>tag:www.monasterium.net,2011:/core/resource/jquery/xrx</xrx:resource> 
  
       <xrx:resource>tag:www.monasterium.net,2011:/core/resource/js/my-account</xrx:resource>  
  </xrx:jss>
  
  <xrx:model>
    {
    if($xrx:user-id='guest')then ()
    else
    

    <xf:model id="my-account">
      <xf:instance id="user-data">{ user:document($xrx:user-id) }
      </xf:instance>
      <xf:instance id="resp">
        <response xmlns="http://www.monasterium.net/NS/xrx" status="">
          <message />
          <icon />
        </response>
      </xf:instance>
      <xf:bind id="bfirstname" nodeset="/xrx:user/xrx:firstname"
        constraint="string-length(.) &gt; 0" required="true()" />
      <xf:bind id="bname" nodeset="/xrx:user/xrx:name" constraint="string-length(.) &gt; 0"
        required="true()" />
      <xf:bind id="bemail" nodeset="/xrx:user/xrx:email" readonly="true()" />
      
      <xf:bind id="bprivatevisibility" nodeset="/xrx:user/xrx:profil/xrx:private/xrx:visibility"/>
      <xf:bind id="bprivateemail"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:mail" />
      <xf:bind id="bprivatephone"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:phone" />
      <xf:bind id="bprivatecountry"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:address/xrx:contact/xrx:county" />
      <xf:bind id="bprivatecity"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:city" />
      <xf:bind id="bprivatecountry"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:country" />
      <xf:bind id="bprivatepostalcode"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:postalcode" />
      <xf:bind id="bprivatestreet"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:street" />
      <xf:bind id="bprivatehousenumber"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:housenumber" />
      <xf:bind id="bprivatefacebook"
        nodeset="/xrx:user/xrx:profil/xrx:private/xrx:contact/xrx:address/xrx:facebook" />
      <xf:bind id="binstitutionvisibility" nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:visibility"/>
      <xf:bind id="binstitutionname"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:institute-name" />
      <xf:bind id="binstitutionemail"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:mail" />
      <xf:bind id="binstitutionphone"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:phone" />
      <xf:bind id="binstitutioncountry"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:address/xrx:contact/xrx:county" />
      <xf:bind id="binstitutioncity"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:city" />
      <xf:bind id="binstitutioncountry"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:country" />
      <xf:bind id="binstitutionpostalcode"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:postalcode" />
      <xf:bind id="binstitutionstreet"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:street" />
      <xf:bind id="binstitutionhousenumber"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:housenumber" />
      <xf:bind id="binstitutionfacebook"
        nodeset="/xrx:user/xrx:profil/xrx:institution/xrx:contact/xrx:address/xrx:facebook" />
      <xf:bind id="bmoderator" nodeset="/xrx:user/xrx:moderator"
        constraint="string-length(.) &gt; 0" required="true()" />      
      <xf:bind id="binfo" nodeset="/xrx:user/xrx:profil/xrx:info" />
      <xf:bind id="btwitter" nodeset="/xrx:user/xrx:profil/xrx:twitter/xrx:twitteraccountname" />
      <xf:bind id="bPublishTwitterButton" type="xf:boolean" nodeset="/xrx:user/xrx:profil/xrx:twitter/xrx:showpublishtwitterbutton"/>
      <xf:bind id="bcontactcharter" type="xf:boolean" nodeset="/xrx:user/xrx:profil/xrx:chartercontact"/>
      <xf:bind id="bgamification" type="xf:boolean" nodeset="/xrx:user/xrx:gamification/xrx:active" />
      <xf:submission id="supdate-account"
        action="{ conf:param('request-root') }service/update-account"
        method="post" replace="instance" instance="resp">
        <xf:action ev:event="xforms-submit-done">
          <xf:message level="ephemeral">Entry successfully saved.</xf:message>
        </xf:action>
      </xf:submission>
    </xf:model>
    }
  </xrx:model>  
  <xrx:view>
    {
    let $user-roles := role:document($xrx:user-id)/xrx:roles/xrx:role/text()
    let $moderator-label :=
    concat(user:firstname-name($xrx:user-xml//xrx:moderator/text()), ' (',
    $xrx:user-id, ')')
    return
    <div>
      <xrx:auth>
        <xrx:rules>
          <xrx:rule>
            <xrx:user />
            <xrx:dbgroup>atom</xrx:dbgroup>
          </xrx:rule>
        </xrx:rules>
        <xrx:true> 
          <div id="my-account" class="standard-form">
            <div>
              <div class="h2">
                <xrx:i18n>
                  <xrx:key>my-account</xrx:key>
                  <xrx:default>My Account</xrx:default>
                </xrx:i18n>
              </div>
              <div>
                <b>
                  <xrx:i18n>
                    <xrx:key>my-roles</xrx:key>
                    <xrx:default>My Roles</xrx:default>
                  </xrx:i18n>
                  <span>: </span>
                  {
                  for $role in $user-roles
                  return
                  <i>{ concat($role, ' ') }</i>
                  }
                </b>
                <br />
                <b>
                  <xrx:i18n>
                    <xrx:key>my-moderator</xrx:key>
                    <xrx:default>My Moderator</xrx:default>
                  </xrx:i18n>
                  <span>: </span>
                  <span>{ $moderator-label }</span>
                </b>
              </div>
              <xf:group id="mom-standard-form" model="my-account"
                appearance="bf:verticalTable" class="InlineRoundBordersAlert">
                <div class="delete-account-trigger">
                  <a href="{ conf:param('request-root') }change-password">
                    <xrx:i18n>
                      <xrx:key>change-my-password-message</xrx:key>
                      <xrx:default>Change my password</xrx:default>
                    </xrx:i18n>
                  </a>
                  <br />
                </div>
                <div class="inlinehead" id='accountdetailshead'>
                  <a href="javascript:showHideDiv('accountdetails')" class="inlinehead-text"> Account Details</a>
                  </div> 
                    <div id="accountdetails" class="form-container" style="display: none">
                      <xf:input bind="bfirstname">
                      <xf:label>
                        <xrx:i18n>
                          <xrx:key>firstname</xrx:key>
                          <xrx:default>Firstname</xrx:default>
                        </xrx:i18n>
                        <span>*:&#160;</span>
                      </xf:label>
                      <xf:hint>
                        <xrx:i18n>
                          <xrx:key>enter-your-firstname</xrx:key>
                          <xrx:default>Enter your Firstname</xrx:default>
                        </xrx:i18n>
                        <span>.</span>
                      </xf:hint>
                      <xf:alert>
                        <xrx:i18n>
                          <xrx:key>required-field</xrx:key>
                          <xrx:default>Required Field</xrx:default>
                        </xrx:i18n>
                        <span>.</span>
                      </xf:alert>
                    </xf:input>
                    <xf:input bind="bname">
                      <xf:label>
                        <xrx:i18n>
                          <xrx:key>lastname</xrx:key>
                          <xrx:default>Lastname</xrx:default>
                        </xrx:i18n>
                        <span>*:&#160;</span>
                      </xf:label>
                      <xf:hint>
                        <xrx:i18n>
                          <xrx:key>enter-your-lastname</xrx:key>
                          <xrx:default>Enter your Lastname</xrx:default>
                        </xrx:i18n>
                        <span>.</span>
                      </xf:hint>
                      <xf:alert>
                        <xrx:i18n>
                          <xrx:key>required-field</xrx:key>
                          <xrx:default>Required Field</xrx:default>
                        </xrx:i18n>
                        <span>.</span>
                      </xf:alert>
                    </xf:input>
                    <xf:input bind="bemail">
                      <xf:label>
                        <xrx:i18n>
                          <xrx:key>login</xrx:key>
                          <xrx:default>your Login</xrx:default>
                        </xrx:i18n>
                        <span>*:&#160;</span>
                      </xf:label>
                    </xf:input>
                  </div>

                <div>
                <div class="inlinehead" id="privatehead">
                <a href="javascript:showHideDiv('private')" class="inlinehead-text"> Private Informations</a>
                </div>
                <div id='private' class="form-container" style="display: none">
                 <xf:select1 bind="bprivatevisibility">
                    <xf:label>
                    	<xrx:i18n>
                    		<xrx:key>visibility</xrx:key>
                    		<xrx:default>visibility</xrx:default>
                    	</xrx:i18n>
                    <span>:</span>
                    </xf:label>
                    <xf:item>
	                     <xf:label>
	                      <xrx:i18n>
	                     	<xrx:key>Public</xrx:key>
	                     	<xrx:default>Public</xrx:default>
	                      </xrx:i18n>
	                    </xf:label>
	                    <xf:value>public</xf:value>
                    </xf:item>
                    <xf:item>
	                    <xf:label>
	                      <xrx:i18n>
	                     	<xrx:key>Friends_only</xrx:key>
	                     	<xrx:default>Friends only</xrx:default>
	                      </xrx:i18n>
	                    </xf:label>
	                    <xf:value>friends</xf:value>
                    </xf:item>
                    <xf:item>                  
                       <xf:label>
	                      <xrx:i18n>
	                     	<xrx:key>Private</xrx:key>
	                     	<xrx:default>Private</xrx:default>
	                      </xrx:i18n>
                      </xf:label>
                      <xf:value>private</xf:value>
                    </xf:item>
                    </xf:select1>
                <xf:input bind="bprivateemail">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>email</xrx:key>
                      <xrx:default>Email</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatephone">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>phone</xrx:key>
                      <xrx:default>Phone</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatecountry">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>country</xrx:key>
                      <xrx:default>Country</xrx:default>             
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatecity">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>city</xrx:key>
                      <xrx:default>City</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatepostalcode">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>postalcode</xrx:key>
                      <xrx:default>Postalcode</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatestreet">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>street</xrx:key>
                      <xrx:default>Street</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="bprivatehousenumber">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>housenumber</xrx:key>
                      <xrx:default>Housenumber</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                 <xf:input bind="bprivatefacebook">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>Facebookling</xrx:key>
                      <xrx:default>Link to Facebook</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                  <xf:hint>
                    <span>http://www.facebook.de/username</span>
                  </xf:hint>
                </xf:input>
                </div>
                </div>
                <div class="inlinehead" id="institutehead">
                <a href="javascript:showHideDiv('institute')" class="inlinehead-text"> Institution</a>
                </div>
                <div id='institute' class="form-container" style="display: none">
                    <xf:select1 bind="binstitutionvisibility">
	 					<xf:label>
	                    	<xrx:i18n>
	                    		<xrx:key>visibility</xrx:key>
	                    		<xrx:default>visibility</xrx:default>
	                    	</xrx:i18n>
	                    <span>:</span>
	                    </xf:label>
	                    <xf:item>
		                     <xf:label>
		                      <xrx:i18n>
		                     	<xrx:key>Public</xrx:key>
		                     	<xrx:default>Public</xrx:default>
		                      </xrx:i18n>
		                    </xf:label>
		                    <xf:value>public</xf:value>
	                    </xf:item>
	                    <xf:item>
		                    <xf:label>
		                      <xrx:i18n>
		                     	<xrx:key>Friends_only</xrx:key>
		                     	<xrx:default>Friends only</xrx:default>
		                      </xrx:i18n>
		                    </xf:label>
		                    <xf:value>friends</xf:value>
	                    </xf:item>
	                    <xf:item>                  
	                       <xf:label>
		                      <xrx:i18n>
		                     	<xrx:key>Private</xrx:key>
		                     	<xrx:default>Private</xrx:default>
		                      </xrx:i18n>
	                      </xf:label>
	                      <xf:value>private</xf:value>
	                    </xf:item>
                    </xf:select1>
                <xf:input bind="binstitutionname">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>institution</xrx:key>
                      <xrx:default>Institution</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                  <xf:hint>
                    <xrx:i18n>
                      <xrx:key>name_of_institution_message</xrx:key>
                      <xrx:default>The Name of your institution</xrx:default>
                    </xrx:i18n>
                    <span>.</span>
                  </xf:hint>
                </xf:input>
                <xf:input bind="binstitutionemail">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>email</xrx:key>
                      <xrx:default>Email</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="binstitutionphone">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>phone</xrx:key>
                      <xrx:default>Phone</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                  <xf:hint>
                    <xrx:i18n>
                      <xrx:key>enter_phone_number_message</xrx:key>
                      <xrx:default>Enter Phone Number</xrx:default>
                    </xrx:i18n>
                    <span>.</span>
                  </xf:hint>
                </xf:input>
                <xf:input bind="binstitutioncountry">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>country</xrx:key>
                      <xrx:default>Country</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="binstitutioncity">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>city</xrx:key>
                      <xrx:default>City</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="binstitutionpostalcode">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>postalcode</xrx:key>
                      <xrx:default>Postalcode</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="binstitutionstreet">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>street</xrx:key>
                      <xrx:default>Street</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                <xf:input bind="binstitutionhousenumber">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>housenumber</xrx:key>
                      <xrx:default>Housenumber</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                </xf:input>
                 <xf:input bind="binstitutionfacebook">
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>Facebookling</xrx:key>
                      <xrx:default>Link to Facebook</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                  <xf:hint>
                    <span>http://www.facebook.com/username</span>
                  </xf:hint>
                </xf:input>
                </div>
              </xf:group>
             <div class="inlinehead" id="additionalhead">
                <a href="javascript:showHideDiv('additional')" class="inlinehead-text">Additional Informations</a>
                </div>
                <div id='additional' class="form-container" style="display: none">                  
                <xf:textarea bind="binfo" width="600" id="aboutmetext"><xf:label>
                    <xrx:i18n>
	                    <xrx:key>about_me</xrx:key>
	                    <xrx:default>About Me</xrx:default>
	                    <span>:</span>
	               </xrx:i18n>
                </xf:label></xf:textarea>
                <!-- Deaktiviert Abfrage für Erlaubniss das andere User fragen zu Charters stellen dürfen und Gamificationfunktionen. -->
                  <!--  <xf:input bind="bcontactcharter">
                    <xf:label>
                      <xrx:i18n>
                        <xrx:key>aktivate-Charter-contact-box</xrx:key>
                        <xrx:default>Allow other User to ask questions about my published Charters</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                    </xf:label>
                  </xf:input>
                  <xf:input bind="bgamification">
                    <xf:label>
                     <xrx:i18n>
                        <xrx:key>aktivate-gamification-box</xrx:key>
                        <xrx:default>Aktive Gamificationfunktion</xrx:default>
                    </xrx:i18n>
                    <span>:</span>
                  </xf:label>
                  </xf:input>
                  -->
                </div>
                <!-- Twitterfunktionen für Basis-Profilpage deaktiviert. -->
                <!-- 
                <div class="inlinehead" id="additionalhead">
                  <a href="javascript:showHideDiv('twitter')" class="inlinehead-text">Twitter Options</a>
                </div>
                <div id="twitter" class="form-container" style="display: none">
                                <div id="TwitterOptions">
                  <xf:input bind="bPublishTwitterButton">
                    <xf:label>Show Twitterbutton when publish a Collection</xf:label>
                  </xf:input>
                </div>
                   <xf:input  bind="btwitter">
                  <xf:label>Twitter Name:</xf:label>
                </xf:input>
                </div>
                -->
                    <div  id="Icons" style="display: none">
       <xrx:resource alt="einklappen" id="ein" type="image/png" class="ic">tag:www.monasterium.net,2011:/mom/resource/image/path_down</xrx:resource>
                  </div>   
              <div id="moderator-div" class="moderator-info" />
              <br />
              <br />
              <xf:group model="my-account">
                <xf:trigger>
                  <xf:label>
                    <xrx:i18n>
                      <xrx:key>apply-changes</xrx:key>
                      <xrx:default>Apply Changes</xrx:default>
                    </xrx:i18n>
                  </xf:label>
                  <xf:action ev:event="DOMActivate">
                    <xf:send submission="supdate-account" />
                  </xf:action>
                </xf:trigger>
              </xf:group>
            </div>
            <div>
              <br />
              <br />
              <br />
              <xrx:i18n>
                <xrx:key>required-field-message</xrx:key>
                <xrx:default>Fields marked with * are required fields.
                </xrx:default>
              </xrx:i18n>
            </div>
          </div>
        </xrx:true>
        <xrx:false>
          <div>
            <div class="h2">
              <xrx:i18n>
                <xrx:key>my-account</xrx:key>
                <xrx:default>My Account</xrx:default>
              </xrx:i18n>
            </div>
            <xrx:i18n>
              <xrx:key>protected-page-message</xrx:key>
              <xrx:default>Protected page. Please login first.</xrx:default>
            </xrx:i18n>
            <xrx:subwidget>tag:www.monasterium.net,2011:/core/widget/login2
            </xrx:subwidget>
          </div>
        </xrx:false>
      </xrx:auth>
    </div>
    }
  </xrx:view>
</xrx:widget>